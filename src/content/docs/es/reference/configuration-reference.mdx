---
title: Referencia de configuración
i18nReady: true
---
import Since from '~/components/Since.astro';

La siguiente referencia cubre todas las opciones de configuración compatibles en Astro. Para obtener más información sobre cómo configurar Astro, lee nuestra guía sobre [Configurar Astro](/es/guides/configuring-astro/).

```js
// astro.config.mjs
import { defineConfig } from 'astro/config'

export default defineConfig({
  // tus opciones de configuración aquí...
})
```
## Opciones de nivel superior


### site

<p>
**Tipo:** `string`
</p>

La URL final donde se desplegará. Astro usa esta URL completa para generar el sitemap y las URL canónicas en la compilación final. Se recomienda establecer esta configuración para aprovechar al máximo Astro.

```js
{
  site: 'https://www.my-site.dev',
}
```

### base

<p>
**Tipo:** `string`
</p>

La ruta base en la que se desplegará. Astro usará esta ruta como la raíz para tus páginas y activos en desarrollo y producción.

En el ejemplo de abajo, `astro dev` empezará tu servidor en `/docs`.

```js
{
  base: '/docs',
}
```

Cuando utilices esta opción, todas tus importaciones de activos estáticos y URL deben agregar la base como prefijo. Puedes acceder a este valor a través de `import.meta.env.BASE_URL`.

El valor de `import.meta.env.BASE_URL` se determinará según la configuración de `trailingSlash`, sin importar el valor que hayas establecido para `base`.

Se incluirá una barra diagonal al final siempre que se establezca `trailingSlash: "always"`. Si se establece `trailingSlash: "never"`, `BASE_URL` no incluirá una barra diagonal al final, incluso si `base` la incluye.

Además, Astro manipulará internamente el valor configurado de `config.base` antes de ponerlo a disposición de las integraciones. El valor de `config.base` tal como lo leen las integraciones también se determinará según la configuración de `trailingSlash` de la misma manera.

En el siguiente ejemplo, los valores de `import.meta.env.BASE_URL` y `config.base`, al ser procesados, serán ambos `/docs`:
```js
{
	 base: '/docs/',
	 trailingSlash: "never"
}
```

En el siguiente ejemplo, los valores de `import.meta.env.BASE_URL` y `config.base`, al ser procesados, serán ambos `/docs/`:
```js
{
	 base: '/docs',
	 trailingSlash: "always"
}
```

### trailingSlash

<p>
**Tipo:** `'always' | 'never' | 'ignore'`<br />
**Por defecto:** `'ignore'`
</p>

Establece el comportamiento de coincidencia de rutas del servidor de desarrollo. Elige entre las siguientes opciones:
   - `'always'`: solo coincide con las URL que incluyen una barra inclinada al final (por ejemplo: "/foo/")
   - `'never'`: nunca haga coincidir las URL que incluyen una barra inclinada al final (por ejemplo: "/foo")
   - `'ignore'`: coincide con las URL independientemente de si existe un "/" final

Utiliza esta opción de configuración si tu host de producción tiene un manejo estricto de cómo funcionan o no las barras inclinadas finales.

También puedes configurar esto si prefieres ser más estricto, de modo que las URL con o sin barras diagonales finales no funcionen durante el desarrollo.

```js
{
  // Ejemplo: Requiera una barra inclinada final durante el desarrollo
  trailingSlash: 'always',
}
```
**Ver también:**
- build.format

### redirects

<p>

**Tipo:** `Record.<string, RedirectConfig>`<br />
**Por defecto:** `{}`<br />
<Since v="2.9.0" />
</p>

Especifica un mapeo de redirecciones donde la clave es la ruta a coincidir y el valor es la ruta a la que se redirige.

Puedes redirigir tanto rutas estáticas como dinámicas, pero solo a un tipo de ruta similar.
Por ejemplo, no puedes tener una redirección `'/article': '/blog/[...slug]'`.


```js
export default defineConfig({
  redirects: {
   '/old': '/new',
   '/blog/[...slug]': '/articles/[...slug]',
   '/about': 'https://example.com/about',
   '/news': {
     status: 302,
     destination: 'https://example.com/news'
   },
   // '/product1/', '/product1' // Nota: esto no es compatible.
	}
})
```

Para sitios generados estáticamente sin un adaptador instalado, esto producirá una redirección del cliente utilizando una [etiqueta `<meta http-equiv="refresh">`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta#http-equiv) y no admitirá códigos de estado.

Cuando se utiliza SSR o un adaptador estático en el modo `output: static`, se admiten los códigos de estado.
Astro servirá las solicitudes GET redirigidas con un estado `301` y utilizará un estado `308` para cualquier otro método de solicitud.

Puedes personalizar el [código de estado de redirección](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status#redirection_messages) utilizando un objeto en la configuración de redirección:

```js
{
  redirects: {
    '/other': {
      status: 302,
      destination: '/place',
    },
  }
}
```

### output

<p>
**Tipo:** `'static' | 'server' | 'hybrid'`<br />
**Por defecto:** `'static'`
</p>

Especifica el tipo de la compilación.

- `'static'`: Genera previamente todas tus páginas por defecto, produciendo un sitio completamente estático si ninguna de tus páginas opta por no prerenderizarse.
- `'server'`: Utiliza renderizado del lado del servidor (SSR) para todas las páginas por defecto, generando siempre un sitio renderizado en el servidor.

```js
import { defineConfig } from 'astro/config';

export default defineConfig({
  output: 'static',
})
```
**Ver también:**
- adapter

### adapter

<p>
**Tipo:** `AstroIntegration`
</p>

Despliega en tu servidor, entorno serverless o edge host favorito con adaptadores de compilación. Importa uno de nuestros adaptadores propios ([Cloudflare](/en/guides/integrations-guide/cloudflare/), [Netlify](/es/guides/integrations-guide/netlify/), [Node.js](/es/guides/integrations-guide/node/), [Vercel](/es/guides/integrations-guide/vercel/)) o explora [adaptadores de la comunidad](https://astro.build/integrations/2/?search=&categories%5B%5D=adapters) para habilitar el renderizado bajo demanda en tu proyecto Astro.

Consulta nuestra [guía de renderizado bajo demanda](/es/guides/on-demand-rendering/) para obtener más información sobre las opciones de renderizado en servidor de Astro.

```js
import netlify from '@astrojs/netlify';
{
 // Ejemplo: Compila para desplegar en Netlify serverless
 adapter: netlify(),
}
```

**Ver también:**
- output

### integraciones

<p>
**Tipo:** `AstroIntegration[]`
</p>

Extiende Astro con integraciones personalizadas. Las integraciones son tu solución integral para añadir compatibilidad con frameworks (como Solid.js), nuevas funciones (como mapas del sitio) y nuevas bibliotecas (como Partytown).

Consulta nuestra [guía de integraciones](/es/guides/integrations-guide/) para obtener ayuda para comenzar con integraciones de Astro.

```js
import react from '@astrojs/react';
import mdx from '@astrojs/mdx';
{
  // Ejemplo: Agrega compatibilidad con React + MDX a Astro
  integrations: [react(), mdx()],
}
```

### root

<p>
**Tipo:** `string`<br />
**CLI:** `--root`<br />
**Por defecto:** `"."` (carpeta de trabajo actual)
</p>

Solo debes proporcionar esta opción si ejecutas los comandos CLI de `astro` en un directorio distinto al directorio raíz del proyecto. Por lo general, esta opción se proporciona a través de la CLI en lugar del archivo de configuración de Astro, ya que Astro necesita conocer la raíz de tu proyecto antes de que pueda localizar su archivo de configuración.

Si proporcionas una ruta relativa (p. ej., `--root: './my-project'`), Astro la resolverá en tu directorio de trabajo actual.

#### Ejemplos

```js
{
  root: './my-project-directory',
}
```
```bash
$ astro build --root ./my-project-directory
```

### srcDir

<p>
**Tipo:** `string`<br />
**Por defecto:** `"./src"`
</p>

Establece la carpeta desde el cual Astro leerá tu proyecto.

El valor puede ser una ruta absoluta del sistema de archivos o una ruta relativa a la raíz del proyecto.

```js
{
  srcDir: './www',
}
```

### publicDir

<p>
**Tipo:** `string`<br />
**Por defecto:** `"./public"`
</p>

Establece la carpeta para los activos estáticos. Los archivos en esta carpeta se sirven desde `/` durante el desarrollo y se copian en la carpeta de compilación durante la compilación. Estos archivos siempre se sirven o se copian tal cual, sin transformación ni empaquetamiento.

El valor puede ser una ruta absoluta del sistema de archivos o una ruta relativa a la raíz del proyecto.

```js
{
  publicDir: './my-custom-publicDir-directory',
}
```

### outDir

<p>
**Tipo:** `string`<br />
**Por defecto:** `"./dist"`
</p>

Establece la carpeta en la que `astro build` escribe la compilación final.

El valor puede ser una ruta absoluta del sistema de archivos o una ruta relativa a la raíz del proyecto.

```js
{
  outDir: './my-custom-build-directory',
}
```
**Ver también:**
- build.server

### cacheDir

<p>
**Tipo:** `string`<br />
**Por defecto:** `"./node_modules/.astro"`
</p>

Establece el directorio para almacenar en caché los artefactos de compilación. Los archivos de este directorio se utilizarán en compilaciones posteriores para acelerar el tiempo de compilación.

El valor puede ser una ruta absoluta del sistema de archivos o una ruta relativa a la raíz del proyecto.

```js
{
  cacheDir: './my-custom-cache-directory'
}
```

### compressHTML

<p>
**Tipo:** `boolean`<br />
**Por defecto:** `true`
</p>

Esta es una opción para minificar la salida HTML y reducir el tamaño de tus archivos HTML.

De forma predeterminada, Astro elimina los espacios en blanco de tu HTML, incluidas las rupturas de línea, de los componentes `.astro` de manera lossless (sin pérdida de información).
Se conservarán algunos espacios en blanco cuando sea necesario para preservar la representación visual de tu HTML. Esto ocurre tanto en el modo de desarrollo como en la compilación final.

Para desactivar la compresión HTML, establece `compressHTML` en false.

```js
{
  compressHTML: false
}
```

### scopedStyleStrategy

<p>
**Tipo:** `'where' | 'class' | 'attribute'`<br />
**Por defecto:** `'attribute'`<br />
<Since v="2.4" />
</p>

Especifica la estrategia utilizada para delimitar los estilos dentro de los componentes de Astro. Elige entre:
  - `'where'` 		- Utilizar selectores `:where`, sin que aumente la especificidad.
  - `'class'` 		- Utilizar selectores basados en clases, lo que provoca un aumento de la especificidad de +1.
  - `'attribute'` - Utilizar atributos `data-`, lo que provoca un aumento de la especificidad de +1.

Utilizar `'class'` es útil cuando quieres asegurar que los selectores de elementos dentro de un componente de Astro anulan los valores predeterminados de estilo global (p. ej. de una hoja de estilos global).
Utilizar `'where'` te brinda más control sobre la especificidad, pero requiere que utilices selectores de mayor especificidad, capas y otras herramientas para controlar qué selectores se aplican.
Utilizar `'attribute'` es útil cuando estás manipulando el atributo `class` de elementos y necesitas evitar conflictos entre tu lógica de estilo y la aplicación de estilos de Astro.

### security

<p>
**Tipo:** `Record<"checkOrigin", boolean> | undefined`<br />
**Por defecto:** `{checkOrigin: true}`<br />
<Since v="4.9.0" />
</p>

Habilita medidas de seguridad para un sitio web de Astro.

Estas funciones solo existen para las páginas renderizadas bajo demanda (SSR) usando el modo `server` o para las páginas que optan por no usar el prerenderizado en el modo `static`.

De forma predeterminada, Astro comprobará automáticamente que el encabezado “origin” 
coincida con la URL enviada por cada solicitud en las páginas renderizadas bajo demanda. Puedes 
desactivar este comportamiento estableciendo `checkOrigin` en `false`:

```js
// astro.config.mjs
export default defineConfig({
  output: "server",
  security: {
    checkOrigin: false
  }
})
```

#### security.checkOrigin

<p>
**Tipo:** `boolean`<br />
**Por defecto:** 'true'<br />
<Since v="4.9.0" />
</p>

Cuando está habilitado, realiza una verificación para asegurar que el encabezado "origin", que es automáticamente proporcionado por todos los navegadores modernos, coincida con la URL enviada por cada `Request`. Esto se utiliza para proporcionar protección contra Cross-Site Request Forgery (CSRF).
La verificación del encabezado "origin" se ejecuta únicamente para páginas renderizadas bajo demanda, y solo para las solicitudes `POST`, `PATCH`, `DELETE` y `PUT` que 
utilicen uno de los siguientes encabezados `content-type`: `'application/x-www-form-urlencoded'`, `'multipart/form-data'`, `'text/plain'`.

Si el encabezado "origin" no coincide con el `pathname` de la solicitud, Astro devolverá un código de estado 403 y no renderizará la página.

### vite

<p>
**Tipo:** `ViteUserConfig`
</p>

Pasa opciones de configuración adicionales a Vite. Útil cuando Astro no admite alguna configuración avanzada que pueda necesitar.

Consulta la documentación completa del objeto de configuración `vite` en [vite.dev](https://vite.dev/config/).

#### Ejemplos

```js
{
  vite: {
    ssr: {
      // Ejemplo: Obliga a un paquete roto a omitir el procesamiento de SSR, si es necesario
      external: ['broken-npm-package'],
    }
  }
}
```

```js
{
  vite: {
    // Ejemplo: Agrega plugins de vite personalizados directamente a tu proyecto de Astro
    plugins: [myPlugin()],
  }
}
```

## Opciones de Build


### build.format

<p>
**Tipo:** `('file' | 'directory' | 'preserve')`<br />
**Por defecto:** `'directory'`
</p>

Controla el formato del archivo compilado de cada página. Este valor puede ser establecido por un adaptador para ti.
  - `'file'`: Astro generará un archivo HTML con el nombre de cada ruta de página. (p. ej. `src/pages/about.astro` y `src/pages/about/index.astro` generan el archivo `/about.html`)
  - `'directory'`: Astro generará un directorio con un archivo `index.html` anidado para cada página. (p. ej. `src/pages/about.astro` y `src/pages/about/index.astro` generan el archivo `/about/index.html`)
  - `'preserve'`: Astro generará archivos HTML exactamente como aparecen en tu carpeta de origen. (p. ej. `src/pages/about.astro` genera `/about.html` y `src/pages/about/index.astro` genera el archivo `/about/index.html`)

```js
{
  build: {
    // Ejemplo: Genera `page.html` en lugar de `page/index.html` durante la compilación.
    format: 'file',
  }
}
```


### Efecto en Astro.url
La opción `build.format` indica el valor que `Astro.url` obtendrá durante la compilación. Si es:
- `directory` - `Astro.url.pathname` incluirá una barra final para imitar el comportamiento de carpetas. Ej.: `/foo/`.
- `file` - `Astro.url.pathname` incluirá `.hmtl`. Ej.: `/foo.html`.

Esto significa que cuando crees URLs relativas usando `new URL('./relativa', Astro.url)`, tendrás un comportamiento consistente entre desarrollo y compilación.

Para evitar inconsistencias con el comportamiento de la barra diagonal final en desarrollo, puedes restringir la opción [`trailingSlash`](#trailingslash) a `'always'` o `'never'` dependiendo del formato de compilación:
- `directory` - Establece `trailingSlash: 'always'`
- `file` - Establece `trailingSlash: 'never'`

### build.client

<p>
**Tipo:** `string`<br />
**Por defecto:** `'./client'`
</p>

Controla el directorio de salida del CSS y JavaScript del lado del cliente al compilar un sitio web con páginas renderizadas en el servidor.
`outDir` controla dónde se compila el código.

Este valor es relativo al `outDir`.

```js
{
  output: 'server',
  build: {
    client: './client'
  }
}
```

### build.server

<p>
**Tipo:** `string`<br />
**Por defecto:** `'./server'`
</p>

Controla el directorio de salida del JavaScript del servidor cuando compila a SSR.

Este valor es relativo al `outDir`.

```js
{
  build: {
    server: './server'
  }
}
```

### build.assets

<p>
**Tipo:** `string`<br />
**Por defecto:** `'_astro'`<br />
<Since v="2.0.0" />
</p>

Especifica el directorio en la salida de compilación donde los activos generados por Astro (por ejemplo, JS y CSS empaquetados) deben ir.

```js
{
  build: {
    assets: '_custom'
  }
}
```
**Ver también:**
- outDir

### build.assetsPrefix

<p>
**Tipo:** `string | Record.<string, string>`<br />
**Por defecto:** `undefined`<br />
<Since v="2.2.0" />
</p>

Especifica el prefijo para los enlaces de activos generados por Astro. Esto se puede usar si los activos se sirven desde un dominio diferente al del sitio actual.

Para ello, es necesario cargar los activos de la carpeta local `./dist/_astro` en la carpeta correspondiente `/_astro/` del dominio remoto.

Para cambiar el nombre de la ruta `_astro`, especifique un nuevo directorio en `build.assets`.

Para recuperar todos los assets cargados en el mismo dominio (por ejemplo, `https://cdn.example.com/_astro/...`), establece `assetsPrefix` en el dominio raíz como un string (independientemente de tu configuración `base`):

```js
{
  build: {
    assetsPrefix: 'https://cdn.example.com'
  }
}
```

**Añadido en:** `astro@4.5.0`

También puedes pasar un objeto a `assetsPrefix` para especificar un dominio diferente para cada tipo de fichero.
En este caso, se requiere una propiedad `fallback` que se utilizará por defecto para cualquier otro archivo.

```js
{
  build: {
    assetsPrefix: {
      'js': 'https://js.cdn.example.com',
      'mjs': 'https://js.cdn.example.com',
      'css': 'https://css.cdn.example.com',
      'fallback': 'https://cdn.example.com'
    }
  }
}
```

### build.serverEntry

<p>
**Tipo:** `string`<br />
**Por defecto:** `'entry.mjs'`
</p>

Especifica el nombre de archivo del punto de entrada al servidor cuando compila a SSR.
Este punto de entrada suele depender del host al que estés desplegando y
será configurado por el adaptador que estés utilizando.

Ten en cuenta que se recomienda que este archivo tenga la extensión `.mjs` así el runtime
detecta que el archivo es un módulo de JavaScript.

```js
{
  build: {
    serverEntry: 'main.mjs'
  }
}
```

### build.redirects

<p>

**Tipo:** `boolean`<br />
**Por defecto:** `true`<br />
<Since v="2.6.0" />
</p>

Especifica si las redirecciones se generarán en HTML durante la compilación. Esta opción solo se aplica al modo `output: 'static'`; en SSR, las redirecciones se tratan de la misma manera que todas las respuestas.

Esta opción está destinada principalmente a ser utilizada por adaptadores que tienen archivos de configuración especiales para redirecciones y no necesitan/desean redirecciones basadas en HTML.

```js
{
  build: {
    redirects: false
  }
}
```

### build.inlineStylesheets

<p>

**Tipo:** `'always' | 'auto' | 'never'`<br />
**Por defecto:** `auto`<br />
<Since v="2.6.0" />
</p>

Controla si los estilos del proyecto se envían al navegador en un archivo CSS separado o se incrustan en etiquetas `<style>`. Elige entre las siguientes opciones:
 - `'always'` - los estilos del proyecto se incrustan en etiquetas `<style>`.
 - `'auto'` - solo las hojas de estilo más pequeñas que ViteConfig.build.assetsInlineLimit (por defecto: 4 kB) se incrustan. De lo contrario, los estilos se envían en hojas de estilo externas.
 - `'never'` - los estilos del proyecto se envían en hojas de estilo externas.

```js
{
	build: {
		inlineStylesheets: `never`,
	},
}
```

### build.concurrency

<p>

**Tipo:** `number`<br />
**Por defecto:** `1`<br />
<Since v="4.16.0" />
</p>

La cantidad de páginas que se compilan en paralelo.

**En la mayoría de los casos, no deberías cambiar el valor predeterminado de `1`.**

Usa esta opción únicamente cuando otros intentos de reducir el tiempo total de renderizado (p. ej. agrupar o almacenar en caché tareas de larga duración como llamadas fetch o acceso a datos) no sean posibles o no resulten suficientes.
Si el número es demasiado alto, el renderizadop de las páginas puede volverse más lento debido a recursos de memoria insuficientes y al hecho de que JavaScript es de un solo hilo (single-threaded).

```js
{
  build: {
    concurrency: 2,
  },
}
```

 :::caution[Es posible que se produzcan cambios importantes]
 Esta característica es estable y no se considera experimental. Sin embargo, está pensada únicamente para abordar problemas de rendimiento complejos, y podrían producirse cambios importantes en una [versión menor](/es/upgrade-astro/#versionado-semántico) para mantener esta opción lo más optimizada posible. Por favor, revisa el [CHANGELOG de Astro](https://github.com/withastro/astro/blob/refs/heads/next/packages/astro/CHANGELOG.md) en cada versión menor si utilizas esta característica.
 :::

## Opciones del Servidor

Personaliza el entorno de desarrollo de Astro, utilizado por `astro dev` y `astro preview`.

```js
{
  server: { port: 1234, host: true},
}
```

Para establecer una configuración diferente basada en el comando ejecutar ("dev", "preview"), también puedes pasar una función a esta opción de configuración.

```js
{
  // Ejemplo: Usa una función para personalizar según el comando
  server: ({ command }) => ({ port: command === 'dev' ? 4321 : 4000 }),
}
```

### server.host

<p>
**Tipo:** `string | boolean`<br />
**Por defecto:** `false`<br />
<Since v="0.24.0" />
</p>

Establece en qué direcciones de IP el servidor debe escuchar (es decir, direcciones IP no locales).
- `false` - no exponer una dirección IP
- `true` - escuchar todas las direcciones, incluidas LAN y direcciones públicas
- `[dirección personalizada]` - exponer una dirección IP en `[dirección personalizada]` (por ejemplo, `192.168.0.1`)

### server.port

<p>
**Tipo:** `number`<br />
**Por defecto:** `4321`
</p>

Establece en qué puerto debe escuchar el servidor.

Si el puerto dado ya está en uso, Astro probará automáticamente el siguiente puerto disponible.

```js
{
  server: { port: 8080 },
}
```

### server.allowedHosts

<p>

**Tipo:** `Array<string> | true`<br />
**Por defecto:** `[]`<br />
<Since v="5.4.0" />
</p>

Una lista de nombres de host a los que Astro tiene permitido responder. Cuando el valor se establece en `true`,
se permite cualquier nombre de host.

```js
{
  server: {
  	allowedHosts: ['staging.example.com', 'qa.example.com']
  }
}
```

### server.open

<p>

**Tipo:** `string | boolean`<br />
**Por defecto:** `false`<br />
<Since v="4.1.0" />
</p>

Controla si el servidor de desarrollo debe abrirse en la ventana de tu navegador al iniciar.

Pasa un string de URL completo (p. ej. "http://example.com") o una ruta (p. ej. "/about") para especificar el URL a abrir.

```js
{
  server: { open: "/about" }
}
```

### server.headers

<p>
**Tipo:** `OutgoingHttpHeaders`<br />
**Por defecto:** `{}`<br />
<Since v="1.7.0" />
</p>

Establece encabezados de respuesta HTTP personalizados para enviar en `astro dev` y `astro preview`.

## Opciones de Sesión

<p>

<Since v="5.7.0" />
</p>

Configura el almacenamiento de sesión para tu proyecto Astro. Esto se utiliza para almacenar datos de sesión de manera persistente, de modo que se puedan acceder a través de diferentes solicitudes.
Algunos adaptadores pueden proporcionar un driver de sesión predeterminado, pero puedes sobrescribirlo con tu propia configuración.

Consulta la [guía de sesiones](/es/guides/sessions/) para obtener más información.

```js title="astro.config.mjs"
  {
    session: {
      // El nombre de el Unstorage driver
      driver: 'redis',
      // Las opciones requeridas dependen del driver
      options: {
        url: process.env.REDIS_URL,
      },
      ttl: 3600, // 1 hora
    }
  }
``` 

### session.driver

<p>

**Tipo:** `string | undefined`<br />
<Since v="5.7.0" />
</p>

El driver de Unstorage que se utilizará para el almacenamiento de sesiones. Los adaptadores de [Node](/es/guides/integrations-guide/node/#sesiones),
[Cloudflare](/es/guides/integrations-guide/cloudflare/#sesiones) y
[Netlify](/es/guides/integrations-guide/netlify/#sesiones) configuran automáticamente un driver predeterminado para ti,
pero puedes especificar el tuyo propio si lo prefieres o si estás utilizando un adaptador que no proporciona uno.

El valor es el "nombre del driver" de la [documentación del driver de Unstorage](https://unstorage.unjs.io/drivers).

```js title="astro.config.mjs" ins={4}
{
  adapter: vercel(),
  session: {
    driver: "redis",
  },
}
```
:::note
Algunos drivers pueden necesitar paquetes adicionales para ser instalados. Algunos drivers también pueden requerir que se establezcan variables de entorno o credenciales. Consulta la [documentación de Unstorage](https://unstorage.unjs.io/drivers) para obtener más información.
:::

### session.options

<p>

**Tipo:** `Record<string, unknown> | undefined`<br />
**Por defecto:** `{}`<br />
<Since v="5.7.0" />
</p>

Las opciones específicas del driver que se utilizarán para el almacenamiento de sesiones. Las opciones dependen del driver que estés utilizando. Consulta la [documentación de Unstorage](https://unstorage.unjs.io/drivers)
para obtener más información sobre las opciones disponibles para cada driver.

```js title="astro.config.mjs" ins={4-6}
{
   session: {
     driver: "redis",
     options: {
       url: process.env.REDIS_URL
     },
   }
}
```

### session.cookie

<p>

**Tipo:** `string | AstroCookieSetOptions | undefined`<br />
**Por defecto:** `{ name: "astro-session", sameSite: "lax", httpOnly: true, secure: true }`<br />
<Since v="5.7.0" />
</p>

La configuración de la cookie de sesión. Si se establece como una cadena, se utilizará como el nombre de la cookie.
Alternativamente, puedes pasar un objeto con opciones adicionales. Estas se fusionarán con los valores predeterminados.

```js title="astro.config.mjs" ins={3-4}
{
 session: {
   // Si se establece como una cadena, se utilizará como el nombre de la cookie.
   cookie: "my-session-cookie",
 }
}

```

```js title="astro.config.mjs" ins={4-8}
{
 session: {
   // Si se establece como un objeto, se utilizará como las opciones de la cookie.
   cookie: {
     name: "my-session-cookie",
     sameSite: "lax",
     secure: true,
   }
 }
}
 ```

### session.ttl

<p>

**Tipo:** `number | undefined`<br />
**Por defecto:** {Infinity}<br />
<Since v="5.7.0" />
</p>

Un período de expiración de tiempo de vida predeterminado opcional para los valores de sesión, en segundos.

Por defecto, los valores de sesión persisten hasta que se eliminan o se destruye la sesión, y no expiran automáticamente porque ha pasado una cantidad particular de tiempo.
Establece `session.ttl` para agregar un período de expiración predeterminado para tus valores de sesión. Pasar una opción `ttl` a [`session.set()`](/es/reference/api-reference/#set) sobrescribirá el valor predeterminado global
para esa entrada individual.

```js title="astro.config.mjs" ins={3-4}
{
 session: {
   // Establecer un período de expiración predeterminado de 1 hora (3600 segundos)
   ttl: 3600,
 }
}
```
:::note
Establecer un valor para `ttl` no elimina automáticamente el valor del almacenamiento después de que ha pasado el límite de tiempo.

Los valores del almacenamiento solo se eliminarán cuando haya un intento de acceder a ellos después de que haya expirado el período de `ttl`. En este momento, el valor de la sesión será indefinido y solo entonces se eliminará el valor.

Los drivers individuales también pueden admitir una opción `ttl` que eliminará automáticamente las sesiones después del tiempo especificado. Consulta la documentación del driver que elegiste para obtener más información.
:::

## Opciones de la barra de herramientas de desarrollo

### devToolbar.enabled

<p>
**Tipo:** `boolean`<br />
**Por defecto:** `true`
</p>

Si deseas activar la barra de herramientas de Astro Dev. Esta barra de herramientas te permite inspeccionar las islas de tu página, ver auditorías útiles sobre rendimiento y accesibilidad, y mucho más.

Esta opción se aplica a todo el proyecto, para desactivar la barra de herramientas sólo para ti, ejecuta `npm run astro preferences disable devToolbar`. Para desactivar la barra de herramientas para todos tus proyectos de Astro, ejecuta `npm run astro preferences disable devToolbar --global`.

### Opciones de Precarga

<p>

**Tipo:** `boolean | object`
</p>

Habilita la precarga de enlaces en tu sitio para proporcionar transiciones de página más rápidas.
(Activado de forma predeterminada en las páginas que utilizan el router `<ViewTransitions />`. Establece `prefetch: false` para optar por no utilizar este comportamiento.)

Esta configuración agrega automáticamente un script de precarga a cada página del proyecto
dandote acceso al atributo `data-astro-prefetch`.
Agrega este atributo a cualquier enlace `<a />` en tu página para habilitar el prefetching para esa página.

```html
<a href="/about" data-astro-prefetch>Acerca</a>
```
Para personalizar aún más el comportamiento predeterminado de precarga puedes usar las opciones [`prefetch.defaultStrategy`](#prefetchdefaultstrategy) y [`prefetch.prefetchAll`](#prefetchprefetchall).

Consulta la [guía de Prefetch](/es/guides/prefetch/) para obtener más información.


### prefetch.prefetchAll

<p>

**Tipo:** `boolean`
</p>

Habilita la precarga para todos los enlaces, incluidos aquellos sin el atributo `data-astro-prefetch`.
El valor predeterminado es `true` cuando se utiliza el router `<ViewTransitions />`. De lo contrario, el valor predeterminado es `false`.

```js
prefetch: {
	prefetchAll: true
}
```

Cuando se establece en `true`, puedes deshabilitar el prefetching individualmente estableciendo `data-astro-prefetch="false"` en cualquier enlace individual.

```html
<a href="/about" data-astro-prefetch="false">About</a>
```


### prefetch.defaultStrategy

<p>

**Tipo:** `'tap' | 'hover' | 'viewport' | 'load'`<br />
**Por defecto:** `'hover'`
</p>

La estrategia de precarga predeterminada para utilizar cuando el atributo `data-astro-prefetch` está establecido en un enlace sin valor.

- `'tap'`: Precarga justo antes de hacer clic en el enlace.
- `'hover'`: Precarga cuando pasas el cursor o te enfocas en el enlace. (predeterminada)
- `'viewport'`: Precarga cuando los enlaces entran en el viewport.
- `'load'`: Precarga todos los enlaces en la página después de que la página se ha cargado.

Puedes reemplazar este valor predeterminado y seleccionar una estrategia diferente para cualquier enlace individual estableciendo un valor en el atributo.

```html
<a href="/about" data-astro-prefetch="viewport">Acerca de</a>
```

## Opciones de Imagen


### image.endpoint

<p>

**Tipo:** `Object`<br />
**Por defecto:** `{route: '/_image', entrypoint: undefined}`<br />
<Since v="3.1.0" />
</p>

Configura el endpoint que se usará para la optimización de imágenes en desarrollo y SSR. La propiedad `entrypoint` se puede establecer en `undefined` para usar el endpoint de imágenes predeterminado.

```js
{
  image: {
    // Ejemplo: usar un endpoint de imagen personalizado en /custom_endpoint
    endpoint: {
		 	route: '/custom_endpoint',
		 	entrypoint: 'src/my_endpoint.ts',
		},
  },
}
```

### image.service 

<p>
**Tipo:** `Object`<br />
**Por defecto:** `{entrypoint: 'astro/assets/services/sharp', config?: {}}`<br />
<Since v="2.1.0" />
</p>

Establece qué servicio de imágenes se utiliza para el soporte de assets de Astro.

El valor debe ser un objeto con un punto de entrada para el servicio de imagen a utilizar y, opcionalmente, un objeto configuración para pasar al servicio.

El punto de entrada del servicio puede ser uno de los servicios incluidos o un paquete de terceros.

```js
{
  image: {
    // Example: Habilita el servicio de imágenes basado en Sharp con una configuración personalizada
    service: {
			 entrypoint: 'astro/assets/services/sharp',
			 config: {
				 limitInputPixels: false,
      },
		 },
  },
}
```

#### image.service.config.limitInputPixels

<p>

**Tipo:** `number | boolean`<br />
**Por defecto:** `true`<br />
<Since v="4.1.0" />
</p>

Limitar o no el tamaño de las imágenes que procesará el servicio de imágenes Sharp.

Establece `false` para omitir el límite de tamaño de imagen por defecto para el servicio de imágenes Sharp y procesar imágenes grandes.

### image.domains

<p>

**Tipo:** `Array.<string>`<br />
**Por defecto:** `[]`<br />
<Since v="2.10.10" />
</p>

Define una lista de dominios de origen de imágenes permitidos para la optimización de imágenes remotas. No se optimizarán otras imágenes remotas por Astro.

Esta opción require un arreglo de nombres de dominio individuales como strings. Los comodines no están permitidos. En su lugar, usa [`image.remotePatterns`](#imageremotepatterns) para definir una lista de patrones de URL de origen permitidos.

```js
// astro.config.mjs
{
  image: {
    // Ejemplo: Permite la optimización de imágenes remotas desde un solo dominio
    domains: ['astro.build'],
  },
}
```

### image.remotePatterns

<p>

**Tipo:** `Array.<RemotePattern>`<br />
**Por defecto:** `[]`<br />
<Since v="2.10.10" />
</p>

Define una lista de patrones de URL de origen permitidos para la optimización de imágenes remotas.

`remotePatterns` pueden ser configurados con cuatro propiedades:
1. protocol
2. hostname
3. port
4. pathname

```js
{
  image: {
    // Ejemplo: permite el procesamiento de todas las imágenes de tu bucket de aws s3
    remotePatterns: [{
      protocol: 'https',
      hostname: '**.amazonaws.com',
    }],
  },
}
```

Puedes usar comodines para definir los valores `hostname` y `pathname` permitidos como se describe a continuación. De lo contrario, solo se configurarán los valores exactos proporcionados:
`hostname`:
  - Empiezar con '**.' para permitir todos los subdominios ('endsWith').
  - Empiezar con '*.' para permitir solo un nivel de subdominio.

`pathname`:
  - Terminar con '/**' para permitir todas las sub-rutas ('startsWith').
  - Terminar con '/*' para permitir solo un nivel de sub-ruta.

### image.responsiveStyles

<p>

**Tipo:** `boolean`<br />
**Por defecto:** `false`<br />
<Since v="5.10.0" />
</p>

Si agregar automáticamente estilos globales para imágenes responsivas. Debes habilitar esta opción a menos que estés aplicando tus propios estilos a las imágenes.

Esta opción solo se utiliza cuando `layout` está configurado como `constrained`, `full-width` o `fixed`, ya sea mediante la configuración o usando la propiedad `layout` en el componente de imagen.

{/* TODO: Add link to the Images guide (#responsive-image-styles) in Spanish when available */}
Consulta la documentación de imágenes para más información.

### image.layout

<p>

**Tipo:** `ImageLayout`<br />
**Por defecto:** `undefined`<br />
<Since v="5.10.0" />
</p>

El tipo de diseño predeterminado para imágenes responsivas. Puede ser sobrescrito mediante la propiedad `layout` en el componente de imagen.
- `constrained` - La imagen se escalará para ajustarse al contenedor, manteniendo su relación de aspecto, pero no superará las dimensiones especificadas.
- `fixed` - La imagen mantendrá sus dimensiones originales.
- `full-width` - La imagen se escalará para ajustarse al contenedor, manteniendo su relación de aspecto.

Consulta [la propiedad `layout` del componente](/es/reference/modules/astro-assets/#layout) para más detalles.

### image.objectFit

<p>

**Tipo:** `ImageFit`<br />
**Por defecto:** `"cover"`<br />
<Since v="5.10.0" />
</p>

El [valor de la propiedad CSS `object-fit`](https://developer.mozilla.org/es/docs/Web/CSS/object-fit) para imágenes responsivas. Puede ser sobrescrito mediante la propiedad `fit` en el componente de imagen.
Requiere que se haya establecido un valor para `layout`.

Consulta [la propiedad `fit` del componente](/es/reference/modules/astro-assets/#fit) para más detalles.

### image.objectPosition

<p>

**Tipo:** `string`<br />
**Por defecto:** `"center"`<br />
<Since v="5.10.0" />
</p>

El valor predeterminado de la [propiedad CSS `object-position`](https://developer.mozilla.org/es/docs/Web/CSS/object-position) para imágenes responsivas. Puede ser sobrescrito mediante la propiedad `position` en el componente de imagen.
Requiere que se haya establecido un valor para `layout`.

Consulta [la propiedad `position` del componente](/es/reference/modules/astro-assets/#position) para más detalles.

### image.breakpoints

<p>

**Tipo:** `Array.<number>`<br />
**Por defecto:** `[640, 750, 828, 1080, 1280, 1668, 2048, 2560] | [640, 750, 828, 960, 1080, 1280, 1668, 1920, 2048, 2560, 3200, 3840, 4480, 5120, 6016]`<br />
<Since v="5.10.0" />
</p>

Los puntos de interrupción utilizados para generar imágenes responsivas. Requiere que se haya establecido un valor para `layout`. La lista completa normalmente no se usa,
sino que se filtra según el tamaño de origen y de salida. Los valores predeterminados utilizados dependen de si se emplea un servicio de imágenes local o remoto. Para los servicios remotos,
se utiliza la lista más completa, ya que solo se generan los tamaños necesarios. Para los servicios locales, la lista es más corta para reducir la cantidad de imágenes generadas.

## Opciones de Markdown

### markdown.shikiConfig

<p>
**Tipo:** `Partial<ShikiConfig>`
</p>

Shiki es nuestro resaltador de sintaxis predeterminado. Puedes configurar todas las opciones a través del objeto `markdown.shikiConfig`:

```js title="astro.config.mjs"
import { defineConfig } from 'astro/config';

export default defineConfig({
  markdown: {
    shikiConfig: {
      // Elige entre los temas integrados de Shiki (o agrega los tuyos propios)
      // https://shiki.style/themes
      theme: 'dracula',
      // Alternativamente, proporciona múltiples temas
      // Consulta la nota más abajo sobre el uso de temas claros/oscuros duales
      themes: {
        light: 'github-light',
        dark: 'github-dark',
      },
      // Deshabilitar los colores predeterminados
      // https://shiki.style/guide/dual-themes#without-default-color
      // (Añadido en v4.12.0)
      defaultColor: false,
      // Agregar lenguajes personalizados
      // Nota: Shiki incluye muchísimos lenguajes integrados, ¡incluido .astro!
      // https://shiki.style/languages
      langs: [],
      // Agregar alias personalizados para lenguajes
      // Mapear un alias a un ID de lenguaje de Shiki: https://shiki.style/languages#bundled-languages
      // https://shiki.style/guide/load-lang#custom-language-aliases
      langAlias: {
        cjs: "javascript"
      },
      // Habilitar el ajuste de línea para evitar el desplazamiento horizontal
      wrap: true,
      // Agregar transformadores personalizados: https://shiki.style/guide/transformers
      // Encuentra transformadores comunes: https://shiki.style/packages/transformers
      transformers: [],
    },
  },
});
```

Consulta la [guía de resaltado de sintaxis de código](/es/guides/syntax-highlighting/) para ver su uso y ejemplos.

### markdown.syntaxHighlight

<p>
**Tipo:** `SyntaxHighlightConfig | SyntaxHighlightConfigType | false`<br />
**Por defecto:** `{ type: 'shiki', excludeLangs: ['math'] }`
</p>

Qué resaltador de sintaxis usar para los bloques de código Markdown (\`\`\`),  si es que se usa alguno. Esto determina las clases CSS que Astro aplicará a tus bloques de código en Markdown.

- `shiki` - usa el resaltador [Shiki](https://shiki.style) (con el tema github-dark configurado por defecto)
- `prism` - usa el resaltador [Prism](https://prismjs.com/) y [proporciona tu propia hoja de estilos de Prism](/es/guides/syntax-highlighting/#agregar-una-hoja-de-estilos-de-prism)
- `false` - no aplicar resaltado de sintaxis.

```js
{
  markdown: {
    // Ejemplo: Cambia el resaltado de sintaxis a prism en Markdown
    syntaxHighlight: 'prism',
  }
}
```

Para tener más control sobre el resaltado de sintaxis, puedes especificar en su lugar un objeto de configuración con las propiedades que se enumeran a continuación.

#### markdown.syntaxHighlight.type
 
<p>

**Tipo:** `'shiki' | 'prism'`<br />
**Por defecto:** `'shiki'`<br />
<Since v="5.5.0" />
</p> 

Las clases CSS predeterminadas que se aplicarán a los bloques de código en Markdown.
(Si no se necesita ninguna otra configuración de resaltado de sintaxis, puedes establecer directamente `markdown.syntaxHighlight` en `shiki`, `prism` o `false`.)

#### markdown.syntaxHighlight.excludeLangs

<p>

**Tipo:** `Array<string>`<br />
**Por defecto:** `['math']`<br />
<Since v="5.5.0" />
</p>

Un array de lenguajes a excluir del resaltado de sintaxis predeterminado especificado en `markdown.syntaxHighlight.type`.
Esto puede ser útil al usar herramientas que crean diagramas a partir de bloques de código Markdown, como Mermaid.js y D2.

```js title="astro.config.mjs"
import { defineConfig } from 'astro/config';

export default defineConfig({
  markdown: {
    syntaxHighlight: {
      type: 'shiki',
      excludeLangs: ['mermaid', 'math'],
    },
  },
});
```

### markdown.remarkPlugins

<p>
**Tipo:** `RemarkPlugins`
</p>

Pasa [plugins de remark](https://github.com/remarkjs/remark) para personalizar la construcción del Markdown. Puedes importar y aplicar la función del plugin (recomendado), o pasar el nombre del plugin como string.

```js
import remarkToc from 'remark-toc';
{
  markdown: {
    remarkPlugins: [ [remarkToc, { heading: "contents"} ] ]
  }
}
```

### markdown.rehypePlugins

<p>
**Tipo:** `RehypePlugins`
</p>

Pasa [plugins de rehype](https://github.com/remarkjs/remark-rehype) para personalizar cómo el HTML generado en compilación es procesado. Puedes importar y aplicar la función del plugin (recomendado), o pasar el nombre del plugin como string.

```js
import { rehypeAccessibleEmojis } from 'rehype-accessible-emojis';
{
  markdown: {
    rehypePlugins: [rehypeAccessibleEmojis]
  }
}
```

### markdown.gfm

<p>
**Tipo:** `boolean`<br />
**Por defecto:** `true`<br />
<Since v="2.0.0" />
</p>

Astro usa [GitHub-flavored Markdown](https://github.com/remarkjs/remark-gfm) por defecto. Para deshabilitarlo, establece la flag `gfm` a `false`:

```js
{
  markdown: {
    gfm: false,
  }
}
```

### markdown.smartypants

<p>
**Tipo:** `boolean`<br />
**Por defecto:** `true`<br />
<Since v="2.0.0" />
</p>

Astro usa el formateador [SmartyPants](https://daringfireball.net/projects/smartypants/) por defecto. Para deshabilitarlo, establezca la propiedad `smartypants` a `false`:

```js
{
  markdown: {
    smartypants: false,
  }
}
```

### markdown.remarkRehype

<p>
**Tipo:** `RemarkRehype`
</p>

Puedes pasar opciones a [remark-rehype](https://github.com/remarkjs/remark-rehype#api).

```js
{
  markdown: {
    // Ejemplo: Traduce el texto de las notas de pie a otro idioma, por ejemplo, aquí están en español
    remarkRehype: { footnoteLabel: "Notas de pie", footnoteBackLabel: "Volver a la referencia 1"},
  }
}
```

## i18n

<p>

**Tipo:** `object`<br />
<Since v="3.5.0" />
</p>

Configura el enrutamiento i18n y te permite especificar algunas opciones de personalización.

Consulta nuestra guía para obtener más información sobre [la internacionalización en Astro](/es/guides/internationalization/)

### i18n.locales

<p>

**Tipo:** `Locales`<br />
<Since v="3.5.0" />
</p>

Una lista de todos los idiomas admitidos por el sitio web, incluyendo el `defaultLocale`. Este es un campo obligatorio.

Los idiomas pueden enumerarse como códigos individuales (por ejemplo, `['en', 'es', 'pt-br']`) o asignarse a una `ruta` compartida de códigos (por ejemplo, `{ path: "english", code: ["en", "en-US"]}`). Estos códigos se utilizarán para determinar la estructura de URL de tu sitio desplegado.

No se impone ningún formato o sintaxis de código de idioma en particular, pero las carpetas de tu proyecto que contengan tus archivos de contenido deben coincidir exactamente con los elementos `locales` de la lista. En caso de que varios `códigos` apunten a un prefijo de ruta URL personalizado, almacena los archivos de contenido en una carpeta con el mismo nombre que la `ruta` configurada.

### i18n.defaultLocale

<p>

**Tipo:** `string`<br />
<Since v="3.5.0" />
</p>

La configuración regional predeterminada de tu sitio web o aplicación, que debe ser una de las `locales` especificadas. Este es un campo obligatorio.

No se impone un formato o sintaxis de idioma en particular, pero se recomienda usar minúsculas y guiones según sea necesario (p. ej. “es”, “pt-br”) para lograr la mayor compatibilidad.

### i18n.fallback

<p>

**Tipo:** `Record.<string, string>`<br />
<Since v="3.5.0" />
</p>

La estrategia de reserva cuando se navega a páginas que no existen (por ejemplo, no se ha creado una página traducida).

Usa este objeto para declarar una ruta de `locale` de reserva para cada idioma que admitas. Si no se especifica una reserva, las páginas no disponibles devolverán un 404.

##### Ejemplo

El siguiente ejemplo configura tu estrategia de reserva de contenido para redirigir las páginas no disponibles en `/pt-br/` a su versión `es`, y las páginas no disponibles en `/fr/` a su versión `en`. Las páginas no disponibles en `/es/` devolverán un 404.

```js
export default defineConfig({
	experimental: {
    i18n: {
      defaultLocale: "en",
      locales: ["en", "fr", "pt-br", "es"],
      fallback: {
        pt: "es",
        fr: "en"
      }
	  }
  }
})
```

### i18n.routing

<p>

**Tipo:** `object | "manual"`<br />
**Por defecto:** `object`<br />
<Since v="3.7.0" />
</p>

Controla la estrategia de enrutamiento para determinar las URLs de tu sitio. Establécelo en función de la configuración de la ruta de la carpeta/URL para tu idioma predeterminado.

```js
export default defineConfig({
	i18n: {
		defaultLocale: "en",
		locales: ["en", "fr"],
		routing: {
			prefixDefaultLocale: false,
			redirectToDefaultLocale: true,
			fallbackType: "redirect",
		}
	}
})
```

Desde la versión 4.6.0, esta opción también se puede establecer en `manual`. Cuando esta estrategia de enrutamiento está habilitada, Astro **deshabilitará** su middleware de i18n y no se podrán configurar otras opciones de `routing` (p. ej. `prefixDefaultLocale`). Serás responsable de escribir tu propia lógica de enrutamiento o de ejecutar manualmente el middleware de i18n de Astro junto con el tuyo propio.

```js
export default defineConfig({
	i18n: {
		defaultLocale: "en",
		locales: ["en", "fr"],
		routing: "manual"
	}
})
```

#### i18n.routing.prefixDefaultLocale

<p>

**Tipo:** `boolean`<br />
**Por defecto:** `false`<br />
<Since v="3.7.0" />
</p>

Cuando es `false`, sólo los idiomas no predeterminados mostrarán un prefijo de idioma.
El `defaultLocale` no mostrará un prefijo de idioma y los archivos de contenido no existen en una carpeta localizada.
 Las URLs tendrán la forma `example.com/[lang]/content/` para todos los idiomas no predeterminados, pero `example.com/content/` para la configuración regional predeterminada.

Cuando es `true`, todas las URLs mostrarán un prefijo de idioma.
Las URLs serán de la forma `example.com/[lang]/content/` para cada ruta, incluyendo el idioma por defecto.
Se utilizan carpetas localizadas para cada idioma, incluido el predeterminado.

```js
export default defineConfig({
	i18n: {
		defaultLocale: "en",
		locales: ["en", "fr", "pt-br", "es"],
		routing: {
			prefixDefaultLocale: true,
		}
	}
})
```

#### i18n.routing.redirectToDefaultLocale

<p>

**Tipo:** `boolean`<br />
**Por defecto:** `true`<br />
<Since v="4.2.0" />
</p>

Configura si la URL de inicio (`/`) generada por `src/pages/index.astro`
se redireccionará a `/[defaultLocale]` cuando `prefixDefaultLocale: true` está configurado.

Establece `redirectToDefaultLocale: false` para desactivar esta redirección automática en la raíz de tu sitio:
```js
// astro.config.mjs
export default defineConfig({
  i18n:{
    defaultLocale: "en",
		locales: ["en", "fr"],
    routing: {
      prefixDefaultLocale: true,
      redirectToDefaultLocale: false
    }
  }
})
```

#### i18n.routing.fallbackType

<p>

**Tipo:** `"redirect" | "rewrite"`<br />
**Por defecto:** `"redirect"`<br />
<Since v="4.15.0" />
</p>

{/* TODO: Add link to the Routing guide (#rewrites) in Spanish when available */}
Cuando [`i18n.fallback`](#i18nfallback) está configurado para evitar mostrar una página 404 en rutas de página faltantes, esta opción controla si se debe [redireccionar](/es/guides/routing/#redirecciones) a la página de respaldo o reescribir el contenido de la página de respaldo en el mismo lugar.

De forma predeterminada, el enrutamiento i18n de Astro crea páginas que redirigen a tus visitantes a un nuevo destino según tu configuración de fallback. El navegador se actualizará y mostrará la dirección de destino en la barra de direcciones.

Cuando se configura `i18n.routing.fallback: "rewrite"`, Astro creará páginas que muestran el contenido de la página de respaldo en la URL original solicitada.

Con la siguiente configuración, si tienes el archivo `src/pages/en/about.astro` pero no src/pages/fr/about.astro, el comando `astro build` generará `dist/fr/about.html` con el mismo contenido que la página `dist/en/about.html`.
El visitante de tu sitio verá la versión en inglés de la página en `https://example.com/fr/about/` y no será redirigido.

```js
//astro.config.mjs
export default defineConfig({
	 i18n: {
    defaultLocale: "en",
    locales: ["en", "fr"],
    routing: {
    	prefixDefaultLocale: false,
    	fallbackType: "rewrite",
    },
    fallback: {
    	fr: "en",
    }
  },
})
```

### i18n.domains

<p>

**Tipo:** `Record<string, string>`<br />
**Por defecto:** `{}`<br />
<Since v="4.3.0" />
</p>

Configura el patrón de URL de uno o más idiomas compatibles para usar un dominio (o subdominio) personalizado.

Cuando una configuración regional se asigna a un dominio, no se usará un prefijo de ruta `/[locale]/`.
Sin embargo, las carpetas localizadas dentro de `src/pages/` siguen siendo necesarias, incluida la correspondiente a tu `defaultLocale` configurado.

Cualquier otra configuración regional que no esté definida usará por defecto una URL localizada basada en la ruta, de acuerdo con tu estrategia `prefixDefaultLocale` (p. ej. `https://example.com/[locale]/blog`).

```js
//astro.config.mjs
export default defineConfig({
	 site: "https://example.com",
	 output: "server", // obligatorio, sin páginas prerenderizadas
	 adapter: node({
	   mode: 'standalone',
	 }),
	 i18n: {
    defaultLocale: "en",
    locales: ["en", "fr", "pt-br", "es"],
    prefixDefaultLocale: false,
    domains: {
      fr: "https://fr.example.com",
      es: "https://example.es"
    }
  },
})
```

Tanto las rutas de página generadas como las URL devueltas por las funciones auxiliares de `astro:i18n` [`getAbsoluteLocaleUrl()`](/es/reference/modules/astro-i18n/#getabsolutelocaleurl) y [`getAbsoluteLocaleUrlList()`](/es/reference/modules/astro-i18n/#getabsolutelocaleurllist) usarán las opciones establecidas en `i18n.domains`.

Consulta la [Guía de Internacionalización](/es/guides/internationalization/#domains) para más detalles, incluyendo las limitaciones de esta función.

## env

<p>

**Tipo:** `object`<br />
**Por defecto:** `{}`<br />
<Since v="5.0.0" />
</p>

Opciones de configuración para variables de entorno con tipado seguro.

Consulta nuestra guía para obtener más información sobre [variables de entorno en Astro](/es/guides/environment-variables/).

### env.schema

<p>

**Tipo:** `EnvSchema`<br />
**Por defecto:** `{}`<br />
<Since v="5.0.0" />
</p>

Un objeto que usa `envField` para definir el tipo de dato y las propiedades de tus variables de entorno: `context` (cliente o servidor), `access` (pública o secreta), un valor `default` a utilizar y si esta variable de entorno es `optional` o no (por defecto es `false`).
```js
// astro.config.mjs
import { defineConfig, envField } from "astro/config"

export default defineConfig({
  env: {
    schema: {
      API_URL: envField.string({ context: "client", access: "public", optional: true }),
      PORT: envField.number({ context: "server", access: "public", default: 4321 }),
      API_SECRET: envField.string({ context: "server", access: "secret" }),
    }
  }
})
```

`envField` admite cuatro tipos de datos: string, number, enum y boolean. `context` y `access` son propiedades obligatorias para todos los tipos de datos. A continuación se muestra la lista completa de propiedades disponibles para cada tipo de dato:

```js
import { envField } from "astro/config"

envField.string({
   // context & access
   optional: true,
   default: "foo",
   max: 20,
   min: 1,
   length: 13,
   url: true,
   includes: "oo",
   startsWith: "f",
   endsWith: "o",
})
envField.number({
   // context & access
   optional: true,
   default: 15,
   gt: 2,
   min: 1,
   lt: 3,
   max: 4,
   int: true,
})
envField.boolean({
   // context & access
   optional: true,
   default: true,
})
envField.enum({
   // context & access
   values: ['foo', 'bar', 'baz'], // obligatorio
   optional: true,
   default: 'baz',
})
```

### env.validateSecrets

<p>

**Tipo:** `boolean`<br />
**Por defecto:** `false`<br />
<Since v="5.0.0" />
</p>

Si se deben validar o no los secretos en el servidor al iniciar el servidor de desarrollo o al ejecutar una compilación.

De forma predeterminada, solo las variables públicas se validan en el servidor al iniciar el servidor de desarrollo o una compilación, y las variables privadas se validan únicamente en tiempo de ejecución. Si se habilita, las variables privadas también se comprobarán al inicio. Esto es útil en algunos procesos de integración continua (CI) para asegurarse de que todos tus secretos estén configurados correctamente antes de desplegar.

```js
// astro.config.mjs
import { defineConfig, envField } from "astro/config"

export default defineConfig({
  env: {
    schema: {
      // ...
    },
    validateSecrets: true
  }
})
```
